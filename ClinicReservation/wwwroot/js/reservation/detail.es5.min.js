"use strict";var detail_script=function(n){var r=function(i,r){var u=r.flyout,o=u.context,e=$(u).find(".rate")[0],f;setTimeout(function(){e.context.set_selection(2)},5);f=$(u).find("div[data-control='button']")[0];f.context.events.clear("click");f.context.events.add("click",function(){var r=parseInt(e.context.selected_index(),10),i=$(u).find("textarea")[0].value;(i===undefined||i===null)&&(i="");t(n.complete+r,i);$("#actionform").submit()})},t=function(n,t){$("#actionform input[name='action']").val(n);t?$("#actionform textarea[name='content']").val(t):$("#actionform textarea[name='content']").val("")},u=function(){t(n.viewmsg,"");$("#actionform").submit()},f=function(){var i=this,r=i.context.get_text();switch(r){case"恢复预约":i.context.set_enabled(!1);t(n.restore,"");$("#actionform").submit();break;case"修改预约单":t(n.modify,"");$("#actionform").submit()}},e=function(){var r=$("#btn_cancelpost")[0].context.flyout,u=r.item,i=$(u).find("div[data-control='button']")[0];i.context.events.clear("click");i.context.events.add("click",function(){t(n.cancel,"");$("#actionform").submit()})},o=function(){var r=$("#btn_stoppost")[0].context.flyout,u=r.item,i=$(u).find("div[data-control='button']")[0];i.context.events.clear("click");i.context.events.add("click",function(){t(n.stop,"");$("#actionform").submit()})},s=function(i,r){var f=r.flyout.context,e=f.item,u=$(e).find("div[data-control='button']")[0];u.context.events.clear("click");u.context.events.add("click",function(i){var r=$(i.parentElement).find("textarea")[0].value;r!==undefined&&r.length!==0&&(t(n.submitmessage,r),$("#actionform").submit())})},i,h=function(){var n,t,h;i=window.siteLanguageSpecifier?window.siteLanguageSpecifier:"";$("#actionform").attr("action",i+$("#actionform").attr("action"));$(".cmdbtns").click(f);n=$("#btn_cancelpost");n.length>0&&n[0].context.events.add("flyout_showing",e);t=$("#btn_stoppost");t.length>0&&t[0].context.events.add("flyout_showing",o);h=$(".btn_postmessage");h.each(function(){this.context.events.add("flyout_showing",s)});$("#btn_msg_viewall").each(function(){this.context.events.add("click",u)});$(".btn_markdone").each(function(){this.context.events.add("flyout_showing",r)})};h()};