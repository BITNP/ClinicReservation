"use strict";(function(n){var u=function(){this.parentElement.context.clear_error()},i=function(){var i=$("#input_detail")[0].context.get_value().trim(),r=$("#input_captcha")[0].context.get_value().trim(),t=!0;return i.length>0&&($("#input_detail")[0].context.set_value(i),i.length<5&&($("#input_detail")[0].context.set_error(n.message.detail.error),t=!1)),r.length<=0?($("#input_captcha")[0].context.set_error(n.message.captcha_empty.error),t=!1):/^\d+$/.exec(r)?$("#input_captcha")[0].context.set_value(r):($("#input_captcha")[0].context.set_error(n.message.captcha.error),t=!1),$("#btn_submit")[0].context.set_enabled(t),t},e=function(n,t){if(!i()){t.handled=!0;return}$("#btn_submit")[0].context.set_enabled(!1);$("#load_ring")[0].style.opacity=1;var r=$(t.form);$.debounce(1e3,function(){r.find("[name='captchaToken']").length>0&&(r.find("[name='captchaText']")[0].value=$("#DNTCaptchaText")[0].value,r.find("[name='captchaToken']")[0].value=$("#DNTCaptchaToken")[0].value);r.submit()})();t.handled=!0},t=-1,r=function(n){var i=n.currentTarget,u=null,r;if(u=i===null?n.parentElement:i.parentElement,t>=0&&$(u.children[t]).removeClass("selected"),t=-1,i!==null){for($(i).addClass("selected"),r=0;r<u.children.length;r++)u.children[r]===i&&(t=r);if(n.change===undefined){var f=new Date,e=f.getTime()+t*864e5,o=new Date(e);$("#input_bookdate")[0].context.set_date(o)}}},o=function(n,t){var i=t.date.year+"/"+t.date.month+"/"+t.date.day,r=new Date(i);s(r)},s=function(n){var u=new Date,t=parseInt(Math.ceil((n-u)/864e5)),i=$(".date-quick-pick > p")[0].parentElement;t<0?r({currentTarget:null,parentElement:i,change:!1}):t<i.children.length?r({currentTarget:$(".date-quick-pick > p")[0].parentElement.children[t],change:!1}):r({currentTarget:null,parentElement:i,change:!1})},f=1e3,h=function(){var h,s;for($("#input_detail")[0].context.set_value($("#hidden_problemdetail").val()),$("#input_detail")[0].context.set_hint("focus","",n.message.detail.hint),n.detail_error&&$("#input_detail")[0].context.set_error(n.detail_error),$(".date-quick-pick > p").click(r),$("#input_bookdate")[0].context.events.add("changed",o),h=$(".date-quick-pick > p"),s=0;s<h.length;s++)if($(h[s]).hasClass("selected")){t=s;break}add_event($("#btn_submit"),"click",e);add_event($("#input_detail"),"blur",i);add_event($("#input_captcha"),"blur",i);$($("#input_detail")[0].context.input).keydown(u);$($("#input_captcha")[0].context.input).keydown(u);$($("#input_detail")[0].context.input).keyup($.debounce(f,i));$($("#input_captcha")[0].context.input).keyup($.debounce(f,i))};n.addEventListener("load",h,!1)})(window);